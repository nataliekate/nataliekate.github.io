{"data":{"site":{"siteMetadata":{"title":"Natalie's Blog","author":"nataliekate"}},"markdownRemark":{"id":"720ac4a8-9425-54bc-acc7-be3e1fd9dd46","excerpt":"HTTP报文 vs. HTTP实体Request and Response messages MAY transfer an entity if not otherwise restricted by the request method or response status code. An entity…","html":"<h2>HTTP报文 vs. HTTP实体</h2>\n<blockquote>\n<p>Request and Response messages MAY transfer an entity if not otherwise restricted by the request method or response status code. An entity consists of entity-header fields and an entity-body, although some responses will only include the entity-headers. (<a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec7.html\">RFC 2616 - section 7</a>)</p>\n</blockquote>\n<p>HTTP在传输数据时可以按照数据原貌直接传输，也可以通过编码提升传输速率。</p>\n<p>在传输时编码，能安全有效的处理大量的访问请求，但同时也会消耗更多的资源（CPU等），因为编码操作需要计算机来完成。</p>\n<p><strong>报文（Message）</strong> 是HTTP通信中的基本单位，由8位组字节流（octet sequence，octet是指八个比特（bit）为一组的单位）。</p>\n<p><strong>实体（Entity）</strong> 作为请求或响应的有效载荷数据（补充项）被传输，内容由实体首部和实体主体组成。</p>\n<p>在请求方法或响应状态码没有限制的情况下，报文可以用于传输实体。</p>\n<h2>报文主体 vs. 实体主体</h2>\n<blockquote>\n<p>The <strong>message-body</strong> (if any) of an HTTP message is used to carry the <strong>entity-body</strong> associated with the request or response. The message-body differs from the entity-body <strong>only when</strong> a <strong>transfer-coding</strong> has been applied, as indicated by the <code class=\"language-text\">Transfer-Encoding</code> header field. (<a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html\">RFC 2616 - section 4</a>)</p>\n</blockquote>\n<blockquote>\n<p> The <strong>entity-body</strong> is obtained from the <strong>message-body</strong> by <em>decoding</em> any Transfer-Encoding that might have been applied to ensure safe and proper transfer of the message.</p>\n</blockquote>\n<p>报文主体用来传输请求或响应的实体主体，通常情况下两者相同。只有当进行了传输编码时，两者才有差异。此时会使用到<code class=\"language-text\">TE</code>或<code class=\"language-text\">Transfer-Encoding</code>头部，来描述使用了何种编码，使用编码可确保报文传输的安全性和准确性。实体主体由报文主体解码所得。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">message-body = entity-body\n              | &lt;entity-body encoded as per Transfer-Encoding&gt;</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// request message\nGET /new_products.html HTTP/1.1\nHost: www.joes-hardware.com\nTE: chunked\n...\n\n// response message\nHTTP/1.1 200 OK\nTransfer-Encoding: chunked\n...</code></pre></div>\n<h2>HTTP实体首部（Entity Headers）</h2>\n<p>HTTP使用了<strong>实体首部</strong>来描述HTTP报文的内容。</p>\n<p>HTTP/1.1定义了10个基本实体头部字段：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">entity-header  = Allow                    ;\n                | Content-Encoding        ;\n                | Content-Language        ;\n                | Content-Length          ;\n                | Content-Location        ;\n                | Content-MD5             ;\n                | Content-Range           ;\n                | Content-Type            ;\n                | Expires                 ;\n                | Last-Modified           ;\n                | 其他 message-header</code></pre></div>\n<h2>HTTP实体主体</h2>\n<p>实体主体随HTTP请求和响应发送，其格式和编码由实体首部定义。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">entity-body = *OCTET</code></pre></div>\n<h3>类型</h3>\n<p>实体主体的数据类型是由 <code class=\"language-text\">Content-Type</code> 和 <code class=\"language-text\">Content-Encoding</code> 两个首部字段决定的。</p>\n<p><code class=\"language-text\">Content-Type</code> 定义数据的类型。\n<code class=\"language-text\">Content-Encoding</code> 用来说明应用在数据上的编码方法（通常用于压缩数据），没有默认的编码方法。</p>\n<blockquote>\n<p>Any HTTP/1.1 message containing an entity-body SHOULD include a Content-Type header field defining the media type of that body. If and only if the media type is not given by a Content-Type field, the recipient MAY attempt to guess the media type via inspection of its content and/or the name extension(s) of the URI used to identify the resource. If the media type remains unknown, the recipient SHOULD treat it as type “application/octet-stream”. (<a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec7.html\">RFC 2616 - section 7</a>)</p>\n</blockquote>\n<h3>长度</h3>\n<p>The entity-length of a message is the length of the message-body before any transfer-codings have been applied. (<a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec7.html\">RFC 2616 - section 7</a>)</p>","frontmatter":{"title":"HTTP Message vs. HTTP Entity","date":"May 19, 2019","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/message_vs_entity/","previous":{"fields":{"slug":"/restful_api/"},"frontmatter":{"title":"RESTful API?"}},"next":{"fields":{"slug":"/content-negotiation/"},"frontmatter":{"title":"什么是内容协商？"}}}}